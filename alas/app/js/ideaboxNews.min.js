!function(i){$.fn.ideaboxNews=function(i){var e={maxwidth:"100%",newscount:5,position:"relative",openspeed:"normal",headercolor:"#FFFFFF",headerbgcolor:"#9d5454",modulid:"ideaboxNews",feed:!1,feedimage:"img/in-rss-image.jpg",feedcount:10,feedlink:"self",feedupdatetimer:0},i=$.extend(e,i);return this.each(function(){function e(e){mW=i.modulid.width(),i.modulid.children(".in-viewer").find(".in-viewer-header img").attr("src",e.find(".in-image img").attr("src")),i.modulid.children(".in-viewer").find(".in-viewer-header div h2").html(e.find(".in-content h2").html()),i.modulid.children(".in-viewer").find(".in-viewer-header div span").html(e.find(".in-content span:first").html()),i.modulid.children(".in-viewer").find(".in-viewer-content").html(e.find(".in-content div:first").html()),i.modulid.children("ul").find("li").each(function(e,d){e<count-1?$(this).animate({left:-mW},speed+20*e):$(this).animate({left:-mW},speed+20*e,function(){i.modulid.children("ul").find("li").css({display:"none"}),i.modulid.children(".in-viewer").fadeIn("normal",function(){i.modulid.find(".in-viewer-content").mCustomScrollbar({axis:"y",theme:"minimal-dark"})})})})}function d(){i.modulid.children("ul").find("li").css({display:"block"}),i.modulid.children("ul").find("li").each(function(e,d){$(this).animate({left:0},speed+20*e),i.modulid.find(".in-viewer-content").mCustomScrollbar("destroy")})}function n(){""!=i.modulid.children("h3").text()?i.modulid.children(".in-viewer").css({top:i.modulid.find("h3").height()+40}):i.modulid.children(".in-viewer").css({top:0})}function l(i,e,d){d=new XMLHttpRequest,d.open("GET",i),d.onload=e,d.send()}function t(e,d){return"http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent("select * from "+d+' where url="'+e+'" limit '+i.feedcount)+"&format=json"}function o(){feeds=i.feed.split(","),labels=i.feedlabels.split(",");var d=["in-red","in-blue","in-purple","in-yellow","in-green","in-orange","in-grey","in-darkblue","in-turquoise"];for(count=0,i.modulid.children("ul").html(""),xx=0,k=0;k<feeds.length;k++)l(t(feeds[k].trim(),"rss"),function(){var n=JSON.parse(this.response);n=n.query.results.item;var l=Math.floor(9*Math.random()+1);$(n).each(function(e,t){count++,"blank"==i.feedlink?datalink=' data-link="'+n[e].link+'" ':datalink="",i.modulid.children("ul").append("<li "+datalink+'><div class="in-image">	<img src="'+i.feedimage+'">	<span class="'+d[l]+'"><h6>'+labels[xx]+'</h6></span></div><div class="in-content">	<h2>'+n[e].title+"</h2>	<span>"+n[e].pubDate+"</span>	<div>"+n[e].description+"</div></div></li>")}),xx==feeds.length-1&&(i.modulid.find("ul:first").mCustomScrollbar({axis:"y",theme:"minimal-dark"}),i.modulid.children("ul").find("li").unbind().on("click",function(){"blank"==i.feedlink?window.open($(this).attr("data-link"),"_blank"):(i.modulid=$(this).parents(".ideaboxNews"),""!=i.modulid.children("h3").text()?i.modulid.children(".in-viewer").css({top:i.modulid.find("h3").height()+40}):i.modulid.children(".in-viewer").css({top:0}),e($(this)))})),xx++})}i.modulid=$(this),count=i.modulid.children("ul").children("li").length,0!=i.feed?(i.modulid.children("ul").html("<li>Loading...</li>"),o(),0!=i.feedupdatetimer&&setInterval(function(){i.modulid.children("ul").find("li").remove(),i.modulid.find("ul:first").mCustomScrollbar("destroy"),o()},i.feedupdatetimer)):(i.modulid.find("ul:first").mCustomScrollbar({axis:"y",theme:"minimal-dark"}),i.modulid.children("ul").find("li").on("click",function(){i.modulid=$(this).parents(".ideaboxNews"),""!=i.modulid.children("h3").text()?i.modulid.children(".in-viewer").css({top:i.modulid.find("h3").height()+40}):i.modulid.children(".in-viewer").css({top:0}),e($(this))})),"fast"==i.openspeed?speed=0:"slow"==i.openspeed?speed=600:speed=300,"rightfixed"==i.position||"leftfixed"==i.position?i.modulid.children("ul").css({height:"100%"}):i.modulid.children("ul").css({height:80*i.newscount}),i.modulid.css({"max-width":i.maxwidth}),i.modulid.children("h3").css({color:i.headercolor,background:i.headerbgcolor}),i.modulid.addClass("in-"+i.position),i.modulid.children(".in-viewer").children(".in-viewer-close").on("click",function(){$(this).parent().fadeOut("fast",function(){i.modulid=$(this).parent(),d()})}),n(),$(window).on("resize",function(){n()})})}}(jQuery);